{"version":3,"sources":["../../src/server/index.js"],"names":[],"mappings":"AAAA;;AAEA,QAAQ,qBAAR,EAA+B;AAC7B,WAAS,CAAC,OAAD,EAAU,QAAV;AADoB,CAA/B;;AAIA,IAAM,UAAU,QAAQ,MAAR,EAAgB,OAAhC;AACA,IAAM,OAAO,QAAQ,MAAR,EAAgB,IAA7B;;AAEA,IAAM,SAAS;AACb,SAAO;AACL,SAAK,CAAC,OAAD,EAAU,OAAV,CADA;AAEL,aAAS,CAAC,OAAD;AAFJ,GADM;AAKb,OAAK;AACH,eAAW,KAAK,SAAL,EAAgB,IAAhB,EAAsB,QAAtB;AADR;AALQ,CAAf;;AAUA,IAAM,cAAc,CAAC;AACnB,QAAM,QAAQ,GAAR,CAAY,IAAZ,IAAoB,IADP;AAEnB,UAAQ,CAAC,KAAD,CAFW;AAGnB,UAAQ;AACN,wBAAoB;AADd;AAHW,CAAD,CAApB;;AASA,IAAM,aAAa,KAAK,SAAL,EAAgB,IAAhB,EAAsB,QAAtB,CAAnB;AACA,IAAM,UAAU;AACd,SAAO,EADO;AAEd,UAAQ,EAFM;AAGd,aAAW;AACT,UAAM,UADG;AAET,aAAS;AACP,WAAK,QAAQ,kBAAR;AADE,KAFA;AAKT,cAAU,QAAQ,GAAR,CAAY,QAAZ,KAAyB;AAL1B,GAHG;AAUd,aAAW,CAAC;AACV,aAAS;AACP,eAAS;AACP,kBAAU,QADH;AAEP,kBAAU,2BAFH;AAGP,sBAAc,oDAHP;AAIP,kBAAU;AAJH;AADF;AADC,GAAD,CAVG;AAoBd,cAAY,EApBE;AAqBd,aAAW,EArBG;AAsBd,gBAAc,EAtBA;AAuBd,cAAY,CAAC;AACX,aAAS;AACP,iBAAW,KAAK,SAAL,EAAgB,IAAhB,EAAsB,IAAtB,EAA4B,QAA5B;AADJ;AADE,GAAD;AAvBE,CAAhB;;AA+BA,IAAM,eAAe,SAAf,YAAe,GAAM;AACzB,UAAQ;AACN,YAAQ,MADF;AAEN,iBAAa,WAFP;AAGN,aAAS;AAHH,GAAR,EAIG;AACD,gBAAY,KAAK,SAAL,EAAgB,SAAhB;AADX,GAJH,EAMG,UAAC,KAAD,EAAQ,MAAR,EAAmB;AACpB,QAAI,KAAJ,EAAW;AACT,YAAM,KAAN;AACD;;AAED,WAAO,KAAP,CAAc,UAAC,KAAD,EAAW;AACvB,UAAI,KAAJ,EAAW;AACT,cAAM,KAAN;AACD;;AAED,aAAO,EAAP,CAAU,kBAAV,EAA8B,UAAC,OAAD,EAAU,KAAV,EAAiB,IAAjB,EAA0B;;AAEtD,YAAI,KAAK,KAAL,IAAc,KAAK,KAAvB,EAA8B;AAC5B,kBAAQ,KAAR,CAAc,KAAd;AACD;AACF,OALD;;AAOA,UAAM,gBAAgB;AACpB,kBAAU,MADU;AAEpB,cAAM,GAFc;AAGpB,kBAAU,QAHU;AAIpB,kBAAU;AAJU,OAAtB;;AAOA,aAAO,KAAP,CAAa,aAAb,EAA4B,aAA5B;;AAEA,aAAO,GAAP,CAAW,CAAC,OAAD,CAAX;AACD,KAtBD;AAuBD,GAlCD;AAmCD,CApCD;;AAsCA,IAAI,CAAC,OAAO,MAAZ,EAAoB;AAClB;AACD;;AAED,OAAO,OAAP,GAAiB,YAAjB","file":"index.js","sourcesContent":["'use strict';\n\nrequire('babel-core/register')({\n  presets: ['react', 'es2015']\n});\n\nconst compose = require('glue').compose;\nconst join = require('path').join;\n\nconst server = {\n  debug: {\n    log: ['error', 'debug'],\n    request: ['error']\n  },\n  app: {\n    sharedDir: join(__dirname, '..', 'shared')\n  }\n};\n\nconst connections = [{\n  port: process.env.PORT || 9000,\n  labels: ['web'],\n  router: {\n    stripTrailingSlash: true\n  }\n}];\n\n\nconst layoutPath = join(__dirname, '..', 'client');\nconst plugins = {\n  inert: {},\n  vision: {},\n  visionary: {\n    path: layoutPath,\n    engines: {\n      jsx: require('hapi-react-views')\n    },\n    isCached: process.env.NODE_ENV === 'production'\n  },\n  './login': [{\n    options: {\n      twitter: {\n        password: 'c2cfyi',\n        clientId: 'JCmN7QwgJGblfpTp0Lry3HvTE',\n        clientSecret: 'E6LnrFDCkTcO5VR0rJKgHKG8TpBYa6rnYiEy8IqgW3LUHsAzj7',\n        isSecure: false\n      }\n    }\n  }],\n  './common': {},\n  './logic': {},\n  './homepage': {},\n  './static': [{\n    options: {\n      staticDir: join(__dirname, '..', '..', 'public')\n    }\n  }]\n};\n\n\nconst createServer = () => {\n  compose({\n    server: server,\n    connections: connections,\n    plugins: plugins\n  }, {\n    relativeTo: join(__dirname, 'plugins')\n  }, (error, server) => {\n    if (error) {\n      throw error;\n    }\n\n    server.start ((error) => {\n      if (error) {\n        throw error;\n      }\n\n      server.on('request-internal', (request, event, tags) => {\n\n        if (tags.error && tags.state) {\n          console.error(event);\n        }\n      });\n\n      const cookieOptions = {\n        encoding: 'iron',\n        path: '/',\n        password: 'c2cfyi',\n        isSecure: false\n      };\n\n      server.state('user-cookie', cookieOptions);\n\n      server.log(['debug'], `Server started on 9000`);\n    });\n  });\n};\n\nif (!module.parent) {\n  createServer();\n}\n\nmodule.exports = createServer;\n\n"]}